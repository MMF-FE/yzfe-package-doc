(function(e){function t(t){for(var a,r,n=t[0],l=t[1],c=t[2],p=0,d=[];p<n.length;p++)r=n[p],s[r]&&d.push(s[r][0]),s[r]=0;for(a in l)Object.prototype.hasOwnProperty.call(l,a)&&(e[a]=l[a]);u&&u(t);while(d.length)d.shift()();return o.push.apply(o,c||[]),i()}function i(){for(var e,t=0;t<o.length;t++){for(var i=o[t],a=!0,n=1;n<i.length;n++){var l=i[n];0!==s[l]&&(a=!1)}a&&(o.splice(t--,1),e=r(r.s=i[0]))}return e}var a={},s={app:0},o=[];function r(t){if(a[t])return a[t].exports;var i=a[t]={i:t,l:!1,exports:{}};return e[t].call(i.exports,i,i.exports,r),i.l=!0,i.exports}r.m=e,r.c=a,r.d=function(e,t,i){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},r.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(r.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)r.d(i,a,function(t){return e[t]}.bind(null,a));return i},r.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="";var n=window["webpackJsonp"]=window["webpackJsonp"]||[],l=n.push.bind(n);n.push=t,n=n.slice();for(var c=0;c<n.length;c++)t(n[c]);var u=l;o.push([0,"chunk-vendors"]),i()})({0:function(e,t,i){e.exports=i("cd49")},"044e":function(e,t,i){},"1d3c":function(e,t,i){"use strict";var a=i("d99d"),s=i.n(a);s.a},"23ef":function(e,t,i){},"336d":function(e,t,i){"use strict";var a=i("23ef"),s=i.n(a);s.a},"37c7":function(e,t,i){},4025:function(e,t){e.exports={name:"delete",data:{width:"14",height:"14",viewBox:"0 0 14 14",data:'<g _fill="#595959" fill-rule="nonzero"><path pid="0" d="M0 2.857h14v-1H0z"/><path pid="1" d="M5.5 1h3v1.357h1V0h-5v2.357h1z"/><path pid="2" d="M2.5 12.5h9V1.857h1V13.5h-11V1.857h1z"/><path pid="3" d="M5 5.143v5.571h1V5.143zM8 5.143v5.571h1V5.143z"/></g>'}}},"4dbe":function(e,t,i){},"4fe3":function(e,t,i){"use strict";var a=i("044e"),s=i.n(a);s.a},"546c":function(e,t,i){"use strict";var a=i("57d3"),s=i.n(a);s.a},"57d3":function(e,t,i){},"5e3c":function(e,t){e.exports={name:"picture",data:{width:"16",height:"14",viewBox:"0 0 16 14",data:'<g transform="translate(0 -1)" _fill="#595959" fill-rule="nonzero"><path pid="0" d="M15.5 1.5v13H.5v-13h15zm-1 1h-13v11h13v-11z"/><circle pid="1" cx="12" cy="5.5" r="1"/><path pid="2" d="M1.493 9.746c.995-1.733 2.212-2.561 3.684-2.553.902.005 1.661.436 3.075 1.586.837.682.995.806 1.37 1.059.71.48 1.34.738 1.99.751 1.573.033 2.842-.65 3.757-2.016l-.831-.556c-.728 1.086-1.679 1.598-2.905 1.573-.424-.01-.885-.198-1.452-.58-.339-.23-.49-.349-1.298-1.006-1.59-1.293-2.49-1.804-3.7-1.811-1.865-.01-3.395 1.031-4.557 3.055l.867.498z"/></g>'}}},"66c6":function(e,t){e.exports={name:"share",data:{width:"16",height:"16",viewBox:"0 0 16 16",data:'<g _fill="#595959" fill-rule="nonzero"><path pid="0" d="M14.5 14.5h-13v-13H8v-1H.5v15h15V8h-1z"/><path pid="1" d="M14 2.72L8.86 7.86l-.707-.707L13.305 2H10V1h5v5h-1V2.72zm0 0V1l1 1h-1.695l1-1H15v.72l-1 1z"/></g>'}}},"68f9":function(e,t){e.exports={name:"search",data:{width:"16",height:"16",viewBox:"0 0 16 16",data:'<g _fill="#595959" fill-rule="nonzero"><path pid="0" d="M7 13.5a6.5 6.5 0 100-13 6.5 6.5 0 000 13zm0-1a5.5 5.5 0 110-11 5.5 5.5 0 010 11z"/><path pid="1" d="M10.837 11.857l3.73 3.68.703-.712-3.73-3.68z"/></g>'}}},8432:function(e,t,i){"use strict";var a=i("37c7"),s=i.n(a);s.a},c839:function(e,t){e.exports={name:"zoom",data:{width:"16",height:"16",viewBox:"0 0 16 16",data:'<g _fill="#595959" fill-rule="nonzero"><path pid="0" d="M7 13.5a6.5 6.5 0 100-13 6.5 6.5 0 000 13zm0-1a5.5 5.5 0 110-11 5.5 5.5 0 010 11z"/><path pid="1" d="M7.5 6.5H10v1H7.5V10h-1V7.5H4v-1h2.5V4h1v2.5zM10.837 11.857l3.73 3.68.703-.712-3.73-3.68z"/></g>'}}},cc4a:function(e,t,i){"use strict";var a=i("4dbe"),s=i.n(a);s.a},cd49:function(e,t,i){"use strict";i.r(t);var a=i("9869"),s=i("8767"),o=i.n(s),r=i("ec2d"),n=i.n(r),l=(i("dd86"),i("e612"),function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"app",attrs:{id:"app"}},[i("upload-view")],1)}),c=[],u=i("0f9e"),p=i("fc36");let d=class extends p["c"]{};d=u["a"]([p["a"]],d);var m,h=d,g=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[e._m(0),i("div",{staticClass:"page-section"},[i("main",[e._v("点击上传")]),i("div",{staticClass:"demo-wrap"},[i("div",{staticClass:"demo-item"},[i("upload",{attrs:{limit:3,"max-size":.5,action:e.qiniuUpHost,data:e.currentUploadData,"before-upload":e.beforeUpload,"on-success":e.onUploadSuccess,multiple:""},model:{value:e.upload1,callback:function(t){e.upload1=t},expression:"upload1"}},[i("template",{slot:"tip"},[e._v("只能上传 jpg/png 文件，且不能超过 0.5M")])],2)],1)])]),i("div",{staticClass:"page-section"},[i("main",[e._v("拖拽上传")]),i("div",{staticClass:"demo-wrap"},[i("div",{staticClass:"demo-item"},[i("upload",{attrs:{limit:3,"max-size":1,action:e.qiniuUpHost,data:e.currentUploadData,"before-upload":e.beforeUpload,"on-success":e.onUploadSuccess,multiple:"",drag:""},model:{value:e.upload2,callback:function(t){e.upload2=t},expression:"upload2"}},[i("template",{slot:"tip"},[e._v("只能上传 jpg/png 文件，且不能超过 1M")])],2)],1)])]),i("div",{staticClass:"page-section"},[i("main",[e._v("上传图片")]),i("div",{staticClass:"demo-wrap"},[i("div",{staticClass:"demo-item"},[i("sub",[e._v("单个图片")]),i("upload",{attrs:{type:"image","accept-type":["jpg","jpeg","png"],action:e.qiniuUpHost,data:e.currentUploadData,"before-upload":e.beforeUpload,"on-success":e.onUploadSuccess},model:{value:e.imageUrls6,callback:function(t){e.imageUrls6=t},expression:"imageUrls6"}})],1),i("div",{staticClass:"demo-item"},[i("sub",[e._v("多个图片")]),i("upload",{attrs:{type:"image","accept-type":["jpg","jpeg","png"],limit:4,action:e.qiniuUpHost,data:e.currentUploadData,"before-upload":e.beforeUpload,"on-success":e.onUploadSuccess,multiple:""},model:{value:e.imageUrls1,callback:function(t){e.imageUrls1=t},expression:"imageUrls1"}})],1),i("div",{staticClass:"demo-item"},[i("sub",[e._v("图片名称")]),i("upload",{attrs:{type:"image","accept-type":["jpg","jpeg","png"],limit:4,"is-simple-value":!1,action:e.qiniuUpHost,data:e.currentUploadData,"before-upload":e.beforeUpload,"on-success":e.onUploadSuccess,multiple:""},model:{value:e.hasNameImageUrls,callback:function(t){e.hasNameImageUrls=t},expression:"hasNameImageUrls"}})],1)])]),i("div",{staticClass:"page-section"},[i("main",[e._v("列表拖拽排序")]),i("div",{staticClass:"demo-wrap"},[i("div",{staticClass:"demo-item"},[i("sub",[e._v("正常状态")]),i("upload",{attrs:{type:"image","accept-type":["jpg","jpeg","png"],limit:4,action:e.qiniuUpHost,data:e.currentUploadData,"before-upload":e.beforeUpload,"on-success":e.onUploadSuccess,multiple:"",sortable:""},model:{value:e.imageUrls,callback:function(t){e.imageUrls=t},expression:"imageUrls"}})],1),i("div",{staticClass:"demo-item"},[i("sub",[e._v("禁用状态")]),i("upload",{attrs:{type:"image","accept-type":["jpg","jpeg","png"],limit:4,action:e.qiniuUpHost,data:e.currentUploadData,"before-upload":e.beforeUpload,"on-success":e.onUploadSuccess,multiple:"",disabled:"",sortable:""},model:{value:e.imageUrls,callback:function(t){e.imageUrls=t},expression:"imageUrls"}})],1)])]),i("div",{staticClass:"page-section"},[i("main",[e._v("自定义内容展示")]),i("div",{staticClass:"demo-wrap"},[i("div",{staticClass:"demo-item"},[i("sub",[e._v("单张图片")]),i("custom-upload",{attrs:{type:"image","accept-type":["jpg","jpeg","png"],action:e.qiniuUpHost,data:e.currentUploadData,"before-upload":e.beforeUpload,"on-success":e.onUploadSuccess},model:{value:e.imageUrls2,callback:function(t){e.imageUrls2=t},expression:"imageUrls2"}})],1),i("div",{staticClass:"demo-item"},[i("sub",[e._v("多个图片")]),i("custom-upload",{attrs:{type:"image","accept-type":["jpg","jpeg","png"],limit:10,action:e.qiniuUpHost,data:e.currentUploadData,"before-upload":e.beforeUpload,"on-success":e.onUploadSuccess,multiple:""},model:{value:e.imageUrls3,callback:function(t){e.imageUrls3=t},expression:"imageUrls3"}})],1)])]),i("div",{staticClass:"page-section"},[i("main",[e._v("裁剪图片")]),i("div",{staticClass:"demo-wrap"},[i("div",{staticClass:"demo-item"},[i("sub",[e._v("默认裁剪（TODO）")]),i("upload",{attrs:{type:"image","accept-type":["jpg","jpeg","png"],limit:1,action:e.qiniuUpHost,data:e.currentUploadData,"before-upload":e.beforeUpload,"on-success":e.onUploadSuccess,crop:""}})],1),i("div",{staticClass:"demo-item"},[i("sub",[e._v("自定义裁剪")]),i("upload",{attrs:{type:"image","accept-type":["jpg","jpeg","png"],limit:1,action:e.qiniuUpHost,data:e.currentUploadData,"before-upload":e.beforeUpload,"on-success":e.onUploadSuccess,"on-crop":e.onCustomCrop,crop:""}}),i("custom-image-crop",{ref:"customImageCrop",attrs:{"crop-size":"400*400"}})],1)])]),i("div",{staticClass:"page-section"},[i("main",[e._v("图片大小压缩")]),i("div",{staticClass:"demo-wrap"},[i("div",{staticClass:"demo-item"},[i("sub",[e._v("默认启用压缩(阀值 10M)")]),i("upload",{attrs:{type:"image",action:e.qiniuUpHost,data:e.currentUploadData,"before-upload":e.beforeUpload,"on-success":e.onUploadSuccess},model:{value:e.compressionImageUrl,callback:function(t){e.compressionImageUrl=t},expression:"compressionImageUrl"}}),i("sub",[e._v("最终上传图片")]),i("img",{attrs:{src:e.compressionImageUrl[0]}})],1),i("div",{staticClass:"demo-item"},[i("sub",[e._v("关闭压缩")]),i("upload",{attrs:{type:"image",compression:0,action:e.qiniuUpHost,data:e.currentUploadData,"before-upload":e.beforeUpload,"on-success":e.onUploadSuccess},model:{value:e.unCompressionImageUrl,callback:function(t){e.unCompressionImageUrl=t},expression:"unCompressionImageUrl"}}),i("sub",[e._v("最终上传图片")]),i("img",{attrs:{src:e.unCompressionImageUrl[0]}})],1)])]),i("div",{staticClass:"page-section"},[i("main",[e._v("自定义操作区")]),i("div",{staticClass:"demo-wrap"},[i("div",{staticClass:"demo-item"},[i("sub",[e._v("默认操作区")]),i("upload",{attrs:{type:"image",action:e.qiniuUpHost,data:e.currentUploadData,"before-upload":e.beforeUpload,"on-success":e.onUploadSuccess},model:{value:e.actionDemoUrl,callback:function(t){e.actionDemoUrl=t},expression:"actionDemoUrl"}})],1),i("div",{staticClass:"demo-item"},[i("sub",[e._v("自定义操作区")]),i("upload",{attrs:{type:"image","item-actions":e.customActions,action:e.qiniuUpHost,data:e.currentUploadData,"before-upload":e.beforeUpload,"on-success":e.onUploadSuccess},model:{value:e.actionDemoUrl,callback:function(t){e.actionDemoUrl=t},expression:"actionDemoUrl"}})],1)])]),i("div",{staticClass:"page-section"},[i("main",[e._v("其他类型上传")]),i("div",{staticClass:"demo-wrap"},[i("div",{staticClass:"demo-item"},[i("sub",[e._v("上传视频")]),i("upload",{attrs:{type:"video",action:e.qiniuUpHost,data:e.currentUploadData,"before-upload":e.beforeUpload,"on-success":e.onUploadSuccess,multiple:"",limit:10},model:{value:e.imageUrls4,callback:function(t){e.imageUrls4=t},expression:"imageUrls4"}})],1),i("div",{staticClass:"demo-item"},[i("sub",[e._v("上传视频和图片")]),i("upload",{attrs:{type:["video","image"],action:e.qiniuUpHost,data:e.currentUploadData,"before-upload":e.beforeUpload,"on-success":e.onUploadSuccess,multiple:"",limit:10},model:{value:e.imageUrls5,callback:function(t){e.imageUrls5=t},expression:"imageUrls5"}})],1)])])])},f=[function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"page-header"},[i("h1",[e._v("Upload")]),i("h2",[e._v("用于上传文件")])])}],v=(i("4fe3"),i("2be6")),b={},y=Object(v["a"])(b,g,f,!1,null,"1e204d32",null),w=y.exports,U=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i(e.currentWrap,{tag:"components",attrs:{draggable:".el-upload-list__item",ignore:"a",disabled:e.disabled},model:{value:e.currentValue,callback:function(t){e.currentValue=t},expression:"currentValue"}},[i("el-upload",e._b({ref:"elUpload",class:["yz-upload","yz-upload--"+e.currentListType,{"yz-upload--list":!e.drag&&e.showFileList&&"file"===e.currentType,"yz-upload--not-upload":e.isDisabledUploadTrigger,"yz-upload--disabled":e.disabled}],scopedSlots:e._u([{key:"file",fn:function(t){var a=t.file;return e.isImageOrVideo?e._t("file",["success"!==a.status?i("el-progress",{staticClass:"yz-upload__progress",attrs:{type:"circle",width:126,percentage:Math.floor(a.percentage||0)}}):i("yz-upload-item",{attrs:{type:e.type,file:a,"show-name":!e.isSimpleValue,actions:e.currentItemActions},on:{action:e.handleItemAction}}),"success"!==a.status?i("i",{staticClass:"el-icon-close",style:{display:"block",zIndex:3},on:{click:function(t){return e.onRemove(a,!0)}}}):e._e()],{file:a}):e._e()}}],null,!0)},"el-upload",e.currentAttrs,!1),[e._t("trigger",["file"===e.type?[e.drag?[i("div",{staticClass:"drag-main"},[i("i",{staticClass:"el-icon-upload"}),i("div",{staticClass:"el-upload__text drap-text"},[e._v("将文件拖到此处，或 "),i("em",[e._v("点击上传")])])])]:[i("el-button",{attrs:{size:"small",type:"primary",disabled:e.disabled}},[e._v("点击上传")])]]:e._e(),e.isImageOrVideo?[e.multiple?e._t("default",[i("i",{staticClass:"el-icon-plus"})]):[e.updateProgressFile?i("div",{staticClass:"yz-upload__progress",on:{click:function(e){e.stopPropagation()}}},[i("el-progress",{attrs:{type:"circle",width:126,percentage:Math.floor(e.updateProgressFile.percentage)}})],1):e.fileList.length>0?e._t("file",[i("yz-upload-item",{attrs:{type:e.type,file:e.fileList[0],actions:e.currentItemActions},on:{action:e.handleItemAction}})],{file:e.fileList[0]}):e._t("default",[i("i",{staticClass:"el-icon-plus"})])]]:e._e()],{slot:"trigger"}),e.$slots.tip?i("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[e._t("tip")],2):e._e()],2),e.previewDialog.status&&e.allPreviewUrlList.length>0?i("el-image-viewer",{ref:"imageViewer",attrs:{"z-index":e.previewDialog.zIndex,"url-list":e.allPreviewUrlList,"on-close":e.closePreviewDialog}}):e._e()],1)},C=[],_=(i("546c"),{}),x=Object(v["a"])(_,U,C,!1,null,"9b421e24",null),j=x.exports,z=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{class:["yz-upload__item","yz-upload__item--"+e.rType,{"yz-upload__item--has-name":e.showName}],on:{click:function(e){e.stopPropagation()}}},[i("div",{staticClass:"yz-upload__item-main"},[e.isVideo?i("video",{attrs:{src:e.file.localUrl||e.file.url,playsinline:"","webkit-playsinline":"true",muted:"",width:"100%",controls:!0},domProps:{muted:!0}}):i("el-image",{staticClass:"yz-upload__item-image",attrs:{src:e.file.localUrl||e.file.url,fit:"cover"}}),i("span",{staticClass:"yz-upload__item-actions"},e._l(e.actions,function(t,a){return i("icon",{key:a,staticClass:"item-action__icon",attrs:{data:t.icon,width:"20",height:"20"},on:{click:function(i){return e.$emit("action",t,e.file)}}})}),1)],1),e.showName?i("p",{staticClass:"yz-upload__item-name"},[e._v(e._s(e.file.name))]):e._e()])},I=[],O=(i("f1dc"),{}),S=Object(v["a"])(O,z,I,!1,null,"01ecf8b4",null),k=S.exports;(function(e){e["Preview"]="preview",e["Delete"]="delete"})(m||(m={}));let P=class extends h{get rType(){let e=this.type;return Array.isArray(e)&&e.includes("image")?"image":["image","video"].includes(e)?"image":e}get isVideo(){let e=this.file.raw;return!(!e||!e.type.match("video"))}created(){}};u["a"]([Object(p["b"])({required:!0,type:Object})],P.prototype,"file",void 0),u["a"]([Object(p["b"])({default:()=>"image",type:[String,Array]})],P.prototype,"type",void 0),u["a"]([Object(p["b"])({default:!1,type:Boolean})],P.prototype,"showName",void 0),u["a"]([Object(p["b"])({default:()=>[],type:Array})],P.prototype,"actions",void 0),P=u["a"]([Object(p["a"])({name:"UploadItem",mixins:[k]})],P);var $=P,V=$,D=i("b8ca"),L=i.n(D);const F={...L.a,name:"custom-vue-draggable",data(){return{...L.a.data(),isUploadList:!0}},computed:{...L.a.computed,rootContainer(){return this.isUploadList?this.$el.querySelector(".el-upload-list"):this.$el}},methods:{...L.a.methods,getChildrenNodes(){const e=Array.from(this.$slots.default[0].child.$children[0].$el.children);return e.map(e=>({elm:e}))}}};delete F["_Ctor"],delete F["_compiled"];var H=a["default"].extend(F),M=i("0ba1"),q=i.n(M),A=i("2495");function E(e=0){return new Promise(t=>{window.setTimeout(t,e)})}function T(e){const t=new URL(e);return t.pathname.split("/").pop()}function B(e){return e.size/1024/1024}function R(e){return new Promise((t,i)=>{A["getData"](e,function(){t(A["getTag"](this,"Orientation"))})})}function N(e){return new Promise((t,i)=>{let a=new FileReader;a.addEventListener("load",()=>{t(a.result)}),a.addEventListener("error",i),a.readAsDataURL(e)})}function Q(e){return new Promise((t,i)=>{let a=new Image;a.addEventListener("load",()=>{t(a)}),a.addEventListener("error",i),a.src=e})}function K(e){const t=document.createElement("canvas");return new Promise(async(i,a)=>{let s=await N(e),o=await Q(s);if(!o.width||!o.height)return a(new Error("img error"));t.width=o.width,t.height=o.height;const r=t.getContext("2d");let n,l=t.width,c=t.height;try{n=await R(o)}catch(u){}if(void 0!==n){let e=0,i=t.width,a=t.height;switch(n){case 3:e=180,l=-i,c=-a;break;case 6:t.width=a,t.height=i,e=90,l=i,c=-a;break;case 8:t.width=a,t.height=i,e=270,l=-i,c=a;break}e&&r&&r.rotate(e*Math.PI/180)}r&&r.drawImage(o,0,0,l,c),t.toBlob(t=>{i(new File([t],e.name,{type:e.type}))},e.type,1)})}function W(e,t={}){let i=document.createElement("canvas"),{type:a,encoderOptions:s}=t;const o=t.height,r=t.width;return a||(a="image/jpeg"),s||(s=.8),new Promise(async(t,n)=>{if(!r&&!o)return n(new Error("width and height is null"));let l=await N(e),c=await Q(l);if(!c.width||!c.height)return n(new Error("img error"));let u=i.getContext("2d");if(r&&!o){let e=r/c.width;i.width=r,i.height=c.height*e}else if(o&&!r){let e=o/c.height;i.height=o,i.width=c.width*e}else i.width=Number(r),i.height=Number(o);u&&u.drawImage(c,0,0,i.width,i.height),i.toBlob(e=>{t(e),c=null,l=null,i=null,u=null},a,s)})}var Y=i("c839"),J=i.n(Y),G=i("4025"),X=i.n(G);const Z=[{icon:J.a,command:m.Preview},{icon:X.a,command:m.Delete}];let ee=class extends h{constructor(){super(...arguments),this.fileList=[],this.previewDialog={status:!1,img:"",zIndex:2e3},this.updateProgressFile=null}get currentValue(){return this.value}set currentValue(e){this.$emit("input",e)}get isImageAndVideo(){let e=this.currentType;return Array.isArray(e)&&e.includes("image")&&e.includes("video")}get isImageOrVideo(){let e=this.currentType;return this.isImageAndVideo||"video"===e||"image"===e}get isShowFileList(){if(this.isImageAndVideo)return this.multiple;switch(this.currentType){case"image":case"video":return this.multiple;case"file":default:return!0}}get currentType(){return this.drag?"file":this.type}get currentFileAccept(){if(this.isImageAndVideo)return"image/*, video/*";switch(this.currentType){case"image":return"image/*";case"video":return"video/*";case"file":default:return"audio/*, video/*, image/*"}}get currentListType(){if(this.isImageAndVideo)return"picture-card";switch(this.currentType){case"image":case"video":return"picture-card";case"file":default:return"text"}}get currentAttrs(){const e={accept:this.currentFileAccept,...this.$attrs,drag:this.drag,limit:this.limit,multiple:this.multiple,disabled:this.disabled,"auto-upload":!0,"show-file-list":this.isShowFileList,"file-list":this.fileList,"list-type":this.currentListType,"on-exceed":this.onExceed,"on-preview":this.onPreview,"on-remove":this.onRemove,"on-success":this.onSuccess,"on-error":this.onError,"on-progress":this.onProgress,"before-upload":this.beforeUpload};return e}get allPreviewUrlList(){return this.fileList.map(e=>e.url)}get isDisabledUploadTrigger(){return"image"===this.type&&1===this.limit&&1===this.fileList.length}get currentItemActions(){return this.itemActions.filter(e=>{return!this.disabled||e.command!==m.Delete})}get showImageViewer(){return this.previewDialog.status&&this.allPreviewUrlList.length>0}changeValue(){const e=this.value.map(e=>{let t=e;"string"===typeof e&&(t={name:T(e),url:e});const i=this.fileList.find(e=>e.url===t.url);return i||{...t,uid:Math.floor(Math.random()*Date.now()),status:"success"}});e.forEach(e=>{this.fileList.find(t=>t.uid===e.uid)||this.fileList.push(e)}),this.fileList=this.fileList.filter(t=>{return!(!e.find(e=>e.uid===t.uid)&&"success"===t.status)}).sort((t,i)=>{return"success"===t.status&&"success"===i.status?e.findIndex(e=>e.uid===t.uid)-e.findIndex(e=>e.uid===i.uid):0}),this.dispatch("ElFormItem","el.form.change",this.value)}async changeImageViewerStatus(e){await this.$nextTick(),this.$refs.imageViewer&&(e?document.body.appendChild(this.$refs.imageViewer.$el):document.body.removeChild(this.$refs.imageViewer.$el))}created(){this.initHooks()}async handleItemAction(e,t){if("function"===typeof e.command)e.command(t);else switch(e.command){case m.Preview:this.onPreview(t);break;case m.Delete:this.onRemove(t);break;default:console.error(new TypeError(`[YzUpload]: 未知操作命令 - ${e.toString()}`))}}closePreviewDialog(){this.previewDialog.status=!1}initHooks(){this.beforeUpload=async e=>{await this.checkFileType(e),await this.checkFileSize(e);const t=await Promise.resolve(e).then(e=>this.resetExifOrientation(e)).then(e=>this.compressionFile(e)).then(e=>this.cropImage(e)).then(t=>{return t.uid=e.uid,t}).then(e=>this.evalUserHook("before-upload",!0,e));t.uid=e.uid;const i=this.$refs.elUpload.uploadFiles,a=i.find(t=>t.uid===e.uid);return a&&(a.raw=t,a.url=URL.createObjectURL(t)),t},this.onError=(e,t,i)=>{this.evalUserHook("on-error",!1,e,t,i)},this.onPreview=e=>{this.checkIsImage(e.raw)&&this.previewImage(e),this.checkIsVideo(e.raw)&&alert("preview video"),this.evalUserHook("on-preview",!1,e)},this.onProgress=(e,t,i)=>{this.updateProgressFile=t,this.evalUserHook("on-progress",!1,e,t,i)},this.onRemove=(e,t=!1)=>{const i=this.$refs.elUpload.uploadFiles;this.fileList=i;const a=this.fileList.findIndex(t=>t.uid===e.uid);-1!==a&&(this.fileList.splice(a,1),this.$emit("input",this.fileList.filter(e=>""!==e.url).map(e=>this.getValue({name:e.name,url:e.url})))),t&&this.$refs.elUpload.abort(e),this.evalUserHook("on-remove",!1,e)},this.onSuccess=(e,t,i)=>{this.updateProgressFile&&t.uid===this.updateProgressFile.uid&&(this.updateProgressFile=null);const a=this.fileList,s=e=>{const t=a.find(t=>t.uid===e.uid);return"success"!==e.status&&t?t.localUrl:e.url},o=i.map(e=>{return{raw:e.raw,name:e.name,url:e.url||"",uid:e.uid,localUrl:s(e),status:e.status,type:e.raw.type.split("/")[0]||"image"}}).slice(0,this.limit);this.fileList=o;const r=o.find(e=>e.uid===t.uid),n=this.evalUserHook("on-success",!1,e,t,i);r&&n&&(r.url=n),this.$emit("input",o.filter(e=>"success"===e.status).map(e=>this.getValue({name:e.name,url:e.url})))},this.onExceed=(e,t)=>{this.multiple&&this.limit>=1&&this.$notify.error(`最多上传 ${this.limit} 个文件`),this.evalUserHook("on-exceed",!1,e,t)}}get currentWrap(){return this.sortable&&this.isShowFileList?H:"div"}checkCanCompression(e){return e.type.includes("image")&&this.compression}checkIsImage(e){return e.type.includes("image")}checkIsVideo(e){return e.type.includes("video")}resetExifOrientation(e){return e.type.includes("image")?K(e):e}async checkFileSize(e){const t=B(e);return this.maxSize&&t>this.maxSize?(this.$notify.warning(`文件 ${e.name} 大小超过 ${this.maxSize}M，请重新上传！`),Promise.reject()):Promise.resolve()}async checkFileType(e){const t=e.type.replace(`${this.type}/`,""),i=this.acceptType;return i.length>0&&!i.includes(t)?Promise.reject():Promise.resolve()}async compressionFile(e){const t=B(e);if(this.checkCanCompression(e)&&t>this.compression){const t=await W(e,{width:1200});return new File([t],e.name)}return e}async previewImage(e){const t=this.previewDialog.img=e.url||"";this.previewDialog.status=!0,this.popupManager&&(this.previewDialog.zIndex=this.popupManager.zIndex),await E(10),this.$refs.imageViewer.index=this.allPreviewUrlList.findIndex(e=>e===t)}async cropImage(e){return this.crop&&"image"===this.type&&this.onCrop?this.onCrop(e):e}getValue(e){return this.isSimpleValue?e.url:e}evalUserHook(e,t,...i){const a=this.$attrs[e];return a?t?new Promise(e=>{a(...i).then(e)}):a(...i):null}removeFile(e){this.onRemove(e)}preview(e){this.onPreview(e)}};u["a"]([Object(p["b"])({default:()=>[]})],ee.prototype,"value",void 0),u["a"]([Object(p["b"])({default:!0,type:Boolean})],ee.prototype,"isSimpleValue",void 0),u["a"]([Object(p["b"])({default:"file"})],ee.prototype,"type",void 0),u["a"]([Object(p["b"])({default:!1,type:Boolean})],ee.prototype,"multiple",void 0),u["a"]([Object(p["b"])({default:!0,type:Boolean})],ee.prototype,"showFileList",void 0),u["a"]([Object(p["b"])({default:!1,type:Boolean})],ee.prototype,"drag",void 0),u["a"]([Object(p["b"])({default:null})],ee.prototype,"maxSize",void 0),u["a"]([Object(p["b"])({default:10})],ee.prototype,"compression",void 0),u["a"]([Object(p["b"])({default:1})],ee.prototype,"limit",void 0),u["a"]([Object(p["b"])({default:!1,type:Boolean})],ee.prototype,"disabled",void 0),u["a"]([Object(p["b"])({default:()=>[],type:Array})],ee.prototype,"acceptType",void 0),u["a"]([Object(p["b"])({default:()=>Z,type:Array})],ee.prototype,"itemActions",void 0),u["a"]([Object(p["b"])({default:!1,type:Boolean})],ee.prototype,"crop",void 0),u["a"]([Object(p["b"])({default:null,type:Function})],ee.prototype,"onCrop",void 0),u["a"]([Object(p["b"])({default:null,type:Object})],ee.prototype,"popupManager",void 0),u["a"]([Object(p["b"])({default:!1,type:Boolean})],ee.prototype,"sortable",void 0),u["a"]([Object(p["d"])("value",{immediate:!0})],ee.prototype,"changeValue",null),u["a"]([Object(p["d"])("showImageViewer")],ee.prototype,"changeImageViewerStatus",null),ee=u["a"]([Object(p["a"])({name:"YzUpload",inheritAttrs:!1,mixins:[j,q.a],components:{YzUploadItem:V,ElImageViewer:s["Image"].components.ImageViewer}})],ee);var te=ee,ie=te;var ae=ie,se=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("upload",e._g(e._b({ref:"upload",class:{"custom-upload":!0,"custom-upload--has-list":e.$attrs.value.length>0},scopedSlots:e._u([{key:"file",fn:function(t){var i=t.file;return a("custom-file-item",{attrs:{file:i},on:{preview:e.handlePreview,remove:e.handleRemove}})}}])},"upload",e.$attrs,!1),e.$listeners),[a("icon",{staticClass:"trgger-icon",attrs:{data:i("5e3c"),width:"16",height:"16"}})],1)},oe=[],re=(i("cc4a"),{}),ne=Object(v["a"])(re,se,oe,!1,null,"5147f54e",null),le=ne.exports,ce=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"custom-file-item",on:{click:function(e){e.stopPropagation()}}},["image"===e.type?i("img",{staticClass:"custom-file-item__image",attrs:{src:e.file.url},on:{click:function(t){return e.$emit("preview",e.file)}}}):e._e(),"image"===e.type?i("video",{attrs:{src:e.file.url}}):e._e(),i("span",{staticClass:"custom-file-item__remove-btn",on:{click:function(t){return t.stopPropagation(),e.$emit("remove",e.file)}}},[i("i")])])},ue=[],pe=(i("336d"),{}),de=Object(v["a"])(pe,ce,ue,!1,null,"58de3c1c",null),me=de.exports;let he=class extends h{created(){}};u["a"]([Object(p["b"])({required:!0,type:Object})],he.prototype,"file",void 0),u["a"]([Object(p["b"])({default:"image",type:String})],he.prototype,"type",void 0),he=u["a"]([Object(p["a"])({name:"CustomFileItem",mixins:[me]})],he);var ge=he,fe=ge;let ve=class extends h{created(){}handleRemove(e){this.$refs.upload.removeFile(e)}handlePreview(e){this.$refs.upload.preview(e)}};ve=u["a"]([Object(p["a"])({name:"CustomUpload",mixins:[le],components:{CustomFileItem:fe,Upload:ie}})],ve);var be=ve,ye=be,we=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("el-dialog",{attrs:{title:"自定义裁剪",visible:e.show,width:e.width+40+"px"},on:{"update:visible":function(t){e.show=t},close:e.handleClose}},[i("div",{staticClass:"custom-image-crop"},[e.isInit?i("mobile-croppa",{ref:"croppa",attrs:{src:e.src,width:e.width,height:e.height,"crop-size":e.cropSize,quality:e.quality,round:""}}):e._e()],1),i("template",{slot:"footer"},[i("el-button",{attrs:{type:"primary"},on:{click:e.submit}},[e._v("裁剪")])],1)],2)},Ue=[],Ce=(i("1d3c"),{}),_e=Object(v["a"])(Ce,we,Ue,!1,null,"f2d25c8e",null),xe=_e.exports,je=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"mobile-croppa"},[i("vue-croppa",e._b({ref:"topCroppa",staticClass:"mobile-croppa__top",attrs:{"initial-image":e.src,"show-remove-button":!1,quality:e.quality,"zoom-speed":5,"prevent-white-space":""},on:{init:e.onInit},model:{value:e.currentCroppa,callback:function(t){e.currentCroppa=t},expression:"currentCroppa"}},"vue-croppa",e.$attrs,!1)),i("vue-croppa",e._b({staticClass:"mobile-croppa__bg",attrs:{"initial-image":e.src,"show-remove-button":!1,quality:e.quality,"prevent-white-space":"",passive:""},model:{value:e.currentCroppa,callback:function(t){e.currentCroppa=t},expression:"currentCroppa"}},"vue-croppa",e.$attrs,!1)),i("canvas",{ref:"offscreenCanvas",staticClass:"offscreen-canvas"})],1)},ze=[],Ie=(i("8432"),{}),Oe=Object(v["a"])(Ie,je,ze,!1,null,"3f1fbc6f",null),Se=Oe.exports,ke=i("1f36"),Pe=i.n(ke);const $e=(e,t)=>{return(i,a,s,o,r)=>{i.beginPath(),i.arc(a+o/2,s+r/2,e.width*t/2,0,2*Math.PI,!0),i.closePath()}},Ve=(e,t)=>{const{width:i,height:a}=e,s=i*t,o=a*t;return(e,t,i,a,r)=>{e.beginPath(),e.rect(t+(a-s)/2,i+(r-o)/2,s,o),e.closePath()}};let De=class extends h{constructor(){super(...arguments),this.currentCroppa={}}get currentCropSize(){const e=this.cropSize.split("*").map(e=>Number(e));return{width:e[0],height:e[1]}}changeSrc(){this.currentCroppa.refresh&&this.currentCroppa.refresh()}created(){}onInit(){const e=this.currentCropSize,t=this.quality;this.currentCroppa.addClipPlugin&&this.currentCroppa.addClipPlugin(this.round?$e(e,t):Ve(e,t))}renderOffscreenCanvas(e){const t=this.$refs.offscreenCanvas,i=t.getContext("2d"),a=this.quality,{width:s,height:o}=this.currentCropSize;return t.width=s*a,t.height=o*a,i&&(i.clearRect(0,0,s,o),i.drawImage(e,(e.width-s*a)/2,(e.height-o*a)/2,t.width,t.height,0,0,t.width,t.height)),t}getOffscreenCanvas(){return this.renderOffscreenCanvas(this.$refs.topCroppa.$el.querySelector("canvas"))}generateDataUrl(e,t){const i=this.getOffscreenCanvas();return i.toDataURL(e,t)}generateBlob(e,t,i){const a=this.getOffscreenCanvas();return a.toBlob(e,t,i)}promisedBlob(e,t){return new Promise((i,a)=>{try{this.generateBlob(e=>{i(e)},e,t)}catch(s){a(s)}})}};u["a"]([Object(p["b"])({required:!0,type:String})],De.prototype,"src",void 0),u["a"]([Object(p["b"])({default:2,type:Number})],De.prototype,"quality",void 0),u["a"]([Object(p["b"])({default:!0,type:Boolean})],De.prototype,"round",void 0),u["a"]([Object(p["b"])({default:"440*440",type:String})],De.prototype,"cropSize",void 0),u["a"]([Object(p["d"])("src")],De.prototype,"changeSrc",null),De=u["a"]([Object(p["a"])({name:"MobileCroppa",mixins:[Se],components:{VueCroppa:Pe.a.component}})],De);var Le=De,Fe=Le;const He=e=>{return new Promise((t,i)=>{const a=new Image;a.onload=()=>t(a),a.onerror=i,a.src=e})};let Me=class extends h{constructor(){super(...arguments),this.show=!1,this.type="image/png",this.src="https://zhanziyang.github.io/vue-croppa/static/500.jpeg",this.isInit=!1,this.quality=2,this.width=440,this.height=768}get currentCropSize(){const e=this.cropSize.split("*").map(e=>Number(e));return{width:e[0],height:e[1]}}created(){}async submit(){if(this.resolveFun){const e=await this.$refs.croppa.promisedBlob(this.type,1);e&&(this.resolveFun(e),this.show=!1,delete this.resolveFun,delete this.rejectFun)}}handleClose(){this.rejectFun&&this.rejectFun()}async init(){const e=await He(this.src);this.initSize(e),this.initQuality(e),this.isInit=!0}async initSize(e){const t=Math.floor(.9*document.documentElement.clientHeight),i=Math.floor(.7*document.documentElement.clientWidth),a=this.currentCropSize.height,s=this.currentCropSize.width,o=e.width,r=e.height,n=o/r,l=s/a;let c=e.width,u=e.height;n>l?(c=s,u=s/n,u<a&&(u=a,c=a*n)):(u=a,c=a*n,c<s&&(c=s,u=s/n)),u>t&&(u=t,c=n*u),c>i&&(c=i,u=c/n),u<a&&(u=a),c<s&&(c=s),this.width=c,this.height=u}async initQuality(e){const{width:t,height:i}=e,a=this.width,s=this.height,o=t/i;let r=a;r=a/t>=s/i?o*s:a/o,this.quality=r/a}crop(e,t){return new Promise(async(i,a)=>{this.resolveFun=i,this.rejectFun=a,this.src=e,this.type=t,await this.init(),this.show=!0})}};u["a"]([Object(p["b"])({default:"440*440",type:String})],Me.prototype,"cropSize",void 0),Me=u["a"]([Object(p["a"])({name:"CustomImageCrop",mixins:[xe],components:{MobileCroppa:Fe}})],Me);var qe=Me,Ae=qe,Ee=i("68f9"),Te=i.n(Ee),Be=i("66c6"),Re=i.n(Be);function Ne(e=10){return Math.random().toString(16).slice(2,e+3)}let Qe=class extends h{constructor(){super(...arguments),this.upload1=[],this.upload2=[],this.imageUrls=[],this.imageUrls1=[],this.imageUrls2=[],this.imageUrls3=[],this.imageUrls4=[],this.imageUrls5=[],this.imageUrls6=[],this.compressionImageUrl=[],this.unCompressionImageUrl=[],this.actionDemoUrl=[],this.hasNameImageUrls=[],this.qiniuUpHost="https://www.mocky.io/v2/5185415ba171ea3a00704eed/posts",this.uploadKey="",this.qiniuConfig=null}get customActions(){return[{icon:Te.a,command:m.Preview},{icon:Re.a,command:e=>{this.$alert(e.url||"")}},{icon:X.a,command:m.Delete}]}get currentUploadData(){return{key:this.uploadKey}}get uploadQueue(){const e=[];let t=!1;const i=()=>{const i=e.shift();i?(t=!0,i()):t=!1};return()=>{return new Promise(a=>{e.push(()=>{a(),window.setTimeout(i,100)}),!t&&i()})}}created(){}async beforeUpload(e){return await this.uploadQueue(),this.uploadKey=Ne(20)+e.uid,e}onUploadSuccess(e){const t="https://iph.href.lu/800x800";return t}async onCustomCrop(e){const t="image/png",i=await this.$refs.customImageCrop.crop(URL.createObjectURL(e),t);return new File([i],e.name,{lastModified:e.lastModified,type:t})}};Qe=u["a"]([Object(p["a"])({name:"UploadView",mixins:[w],components:{CustomUpload:ye,CustomImageCrop:Ae,Upload:ae}})],Qe);var Ke=Qe,We=Ke,Ye={components:{"upload-view":We},data:()=>{return{name:"lauginwing"}}},Je=Ye,Ge=Object(v["a"])(Je,l,c,!1,null,null,null),Xe=Ge.exports;a["default"].config.productionTip=!1,a["default"].use(o.a),a["default"].use(n.a,{tagName:"icon"}),new a["default"]({render:e=>e(Xe)}).$mount("#app")},d99d:function(e,t,i){},e612:function(e,t,i){},ec50:function(e,t,i){},f1dc:function(e,t,i){"use strict";var a=i("ec50"),s=i.n(a);s.a}});
//# sourceMappingURL=app.570a3bfc.js.map